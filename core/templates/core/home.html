{% extends 'core/base.html' %}

{% block title %}Inicio - Cosmofood{% endblock %}

{% block content %}
<!-- Carrusel de Imágenes -->
<div class="relative w-full overflow-hidden bg-gray-900" id="carousel">
    <!-- Slides -->
    <div class="flex transition-transform duration-700 ease-in-out" id="carouselSlides">
        <!-- Slide 1 -->
        <div class="min-w-full relative">
            <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=1200&h=600&fit=crop" 
                 class="w-full h-[400px] md:h-[500px] lg:h-[600px] object-cover" 
                 alt="Hamburguesas deliciosas">
            <div class="absolute inset-0 bg-black/50 flex items-center justify-center">
                <div class="text-center text-white px-4">
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Las Mejores Hamburguesas</h2>
                    <p class="text-xl md:text-2xl mb-6">Ingredientes frescos y sabor auténtico</p>
                    <a href="{% url 'catalogo_productos' %}?categoria=1" 
                       class="bg-primary hover:bg-primary-dark text-white px-8 py-3 rounded-lg font-semibold text-lg transition duration-200 inline-block">
                        Ver Hamburguesas
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Slide 2 -->
        <div class="min-w-full relative">
            <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=1200&h=600&fit=crop" 
                 class="w-full h-[400px] md:h-[500px] lg:h-[600px] object-cover" 
                 alt="Pizzas artesanales">
            <div class="absolute inset-0 bg-black/50 flex items-center justify-center">
                <div class="text-center text-white px-4">
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Pizzas Artesanales</h2>
                    <p class="text-xl md:text-2xl mb-6">Recetas tradicionales con un toque especial</p>
                    <a href="{% url 'catalogo_productos' %}?categoria=2" 
                       class="bg-primary hover:bg-primary-dark text-white px-8 py-3 rounded-lg font-semibold text-lg transition duration-200 inline-block">
                        Ver Pizzas
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Slide 3 -->
        <div class="min-w-full relative">
            <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=1200&h=600&fit=crop" 
                 class="w-full h-[400px] md:h-[500px] lg:h-[600px] object-cover" 
                 alt="Comida rápida variada">
            <div class="absolute inset-0 bg-black/50 flex items-center justify-center">
                <div class="text-center text-white px-4">
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Variedad para Todos</h2>
                    <p class="text-xl md:text-2xl mb-6">Descubre nuestro menú completo</p>
                    <a href="{% url 'catalogo_productos' %}?ver_todo=true" 
                       class="bg-primary hover:bg-primary-dark text-white px-8 py-3 rounded-lg font-semibold text-lg transition duration-200 inline-block">
                        Ver Menú Completo
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Botones de navegación -->
    <button id="prevBtn" 
            class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 backdrop-blur-sm text-white w-12 h-12 rounded-full flex items-center justify-center transition duration-300 z-10">
        <i class="fas fa-chevron-left text-2xl"></i>
    </button>
    <button id="nextBtn" 
            class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 backdrop-blur-sm text-white w-12 h-12 rounded-full flex items-center justify-center transition duration-300 z-10">
        <i class="fas fa-chevron-right text-2xl"></i>
    </button>
    
    <!-- Indicadores -->
    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10">
        <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white transition duration-300" data-slide="0"></button>
        <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white transition duration-300" data-slide="1"></button>
        <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white transition duration-300" data-slide="2"></button>
    </div>
</div>

<div class="container mx-auto px-4">
    <!-- Hero Section -->
    <div class="grid lg:grid-cols-2 gap-12 items-center my-12">
        <div class="space-y-6">
            <h1 class="text-5xl lg:text-6xl font-bold leading-tight">
                Bienvenido a <span class="text-primary">Cosmofood</span>
            </h1>
            <p class="text-xl text-gray-600">
                La mejor comida rápida de Valdivia, ahora a un clic de distancia. 
                Realiza tus pedidos online y recibe en la comodidad de tu hogar.
            </p>
            <div class="flex flex-wrap gap-4">
                {% if not user.is_authenticated %}
                    <a href="{% url 'registro' %}" class="bg-primary hover:bg-primary-dark text-white px-8 py-3 rounded-lg font-semibold text-lg transition duration-200 inline-flex items-center gap-2">
                        <i class="fas fa-user-plus"></i> Crear Cuenta
                    </a>
                    <a href="{% url 'login' %}" class="border-2 border-primary text-primary hover:bg-primary hover:text-white px-8 py-3 rounded-lg font-semibold text-lg transition duration-200">
                        Iniciar Sesión
                    </a>
                {% else %}
                    <a href="{% url 'catalogo_productos' %}" class="bg-primary hover:bg-primary-dark text-white px-8 py-3 rounded-lg font-semibold text-lg transition duration-200 inline-flex items-center gap-2">
                        <i class="fas fa-utensils"></i> Ver Menú
                    </a>
                {% endif %}
            </div>
        </div>
        <div class="order-first lg:order-last">
            <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=600" 
                 class="w-full rounded-2xl shadow-2xl" alt="Comida rápida">
        </div>
    </div>
    
    <!-- Características -->
    <div class="grid md:grid-cols-3 gap-6 my-12">
        <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300 p-8 text-center">
            <div class="text-primary text-5xl mb-4">
                <i class="fas fa-shipping-fast"></i>
            </div>
            <h5 class="text-xl font-bold mb-2">Delivery Rápido</h5>
            <p class="text-gray-600">Entregas en menos de 30 minutos</p>
        </div>
        <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300 p-8 text-center">
            <div class="text-primary text-5xl mb-4">
                <i class="fas fa-credit-card"></i>
            </div>
            <h5 class="text-xl font-bold mb-2">Pago Seguro</h5>
            <p class="text-gray-600">Múltiples métodos de pago disponibles</p>
        </div>
        <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300 p-8 text-center">
            <div class="text-primary text-5xl mb-4">
                <i class="fas fa-star"></i>
            </div>
            <h5 class="text-xl font-bold mb-2">Calidad Garantizada</h5>
            <p class="text-gray-600">Los mejores ingredientes frescos</p>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    // Carrusel de imágenes
    const slides = document.getElementById('carouselSlides');
    const indicators = document.querySelectorAll('.carousel-indicator');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    let currentSlide = 0;
    const totalSlides = 3;
    let autoPlayInterval;
    
    function goToSlide(n) {
        currentSlide = (n + totalSlides) % totalSlides;
        slides.style.transform = `translateX(-${currentSlide * 100}%)`;
        
        // Actualizar indicadores
        indicators.forEach((indicator, index) => {
            if (index === currentSlide) {
                indicator.classList.remove('bg-white/50');
                indicator.classList.add('bg-white');
            } else {
                indicator.classList.remove('bg-white');
                indicator.classList.add('bg-white/50');
            }
        });
    }
    
    function nextSlide() {
        goToSlide(currentSlide + 1);
    }
    
    function prevSlide() {
        goToSlide(currentSlide - 1);
    }
    
    // Event listeners para botones
    nextBtn.addEventListener('click', () => {
        nextSlide();
        resetAutoPlay();
    });
    
    prevBtn.addEventListener('click', () => {
        prevSlide();
        resetAutoPlay();
    });
    
    // Event listeners para indicadores
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            goToSlide(index);
            resetAutoPlay();
        });
    });
    
    // Auto-play
    function startAutoPlay() {
        autoPlayInterval = setInterval(nextSlide, 5000);
    }
    
    function resetAutoPlay() {
        clearInterval(autoPlayInterval);
        startAutoPlay();
    }
    
    // Pausar auto-play cuando el mouse está sobre el carrusel
    const carousel = document.getElementById('carousel');
    carousel.addEventListener('mouseenter', () => {
        clearInterval(autoPlayInterval);
    });
    
    carousel.addEventListener('mouseleave', () => {
        startAutoPlay();
    });
    
    // Inicializar
    goToSlide(0);
    startAutoPlay();
    
    // Soporte para gestos táctiles (swipe) en móviles
    let touchStartX = 0;
    let touchEndX = 0;
    
    carousel.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
    });
    
    carousel.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });
    
    function handleSwipe() {
        if (touchEndX < touchStartX - 50) {
            nextSlide();
            resetAutoPlay();
        }
        if (touchEndX > touchStartX + 50) {
            prevSlide();
            resetAutoPlay();
        }
    }
</script>
{% endblock %}